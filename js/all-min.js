var cmId=document.getElementById("cmId"),kgId=document.getElementById("kgId"),sendbtn=document.querySelector(".sendbtn"),answer=document.querySelector("#answer"),save=document.querySelector("#answer .save"),refresh=document.querySelector("#answer .refresh"),record=document.querySelector(".record"),Data=JSON.parse(localStorage.getItem("BMIList"))||[],today=new Date;function setInputFilter(e,t){["input","keydown","keyup","mousedown","mouseup","select","contextmenu","drop"].forEach(function(a){e.addEventListener(a,function(){t(this.value)?(this.oldValue=this.value,this.oldSelectionStart=this.selectionStart,this.oldSelectionEnd=this.selectionEnd):this.hasOwnProperty("oldValue")&&(this.value=this.oldValue,this.setSelectionRange(this.oldSelectionStart,this.oldSelectionEnd))})})}function countBMI(){var e,t,a,n=document.querySelector("#answer .BMIN .BMI"),o=document.querySelector("#answer .category"),r=parseInt(cmId.value),s=parseInt(kgId.value),d=r/100,l=(s/(d*d)).toFixed(2);""!=cmId.value?""!=kgId.value?(l<18.5?(e="過輕",t="underweight",a="bor-underweight"):18.5<=l&&l<25?(e="理想",t="normal",a="bor-normal"):25<=l&&l<30?(e="過重",t="overweight",a="bor-overweight"):30<=l&&l<35?(e="中度肥胖",t="obeseI",a="bor-obeseI"):35<=l&&l<40?(e="嚴重肥胖",t="obeseII",a="bor-obeseII"):40<=l&&(e="非常嚴重肥胖",t="obeseIII",a="bor-obeseIII"),this.style.display="none",answer.style.display="block",answer.setAttribute("class",t),n.textContent=l,o.textContent=e,save.addEventListener("click",function(){var t={borColor:a,category:e,BMI:l,cm:r,kg:s};Data.push(t),updataRecord(Data),localStorage.setItem("BMIList",JSON.stringify(Data)),window.location.reload()},!1),refresh.addEventListener("click",function(){$(".userinput input").val(""),answer.style.display="none",sendbtn.style.display="block"},!1)):alert("請輸入體重"):alert("請輸入身高")}function updataRecord(e){for(var t="",a=today.getFullYear()+" / "+(today.getMonth()+1)+" / "+today.getDate(),n=0;n<e.length;n++)t+='<li class="'+e[n].borColor+'"><table><tr><td style="width:140px">'+e[n].category+"</td><td><span>BMI</span> "+e[n].BMI+"</td><td><span>weight</span> "+e[n].kg+"</td><td><span>height</span> "+e[n].cm+'</td><td class="date"><span>'+a+'</span></td><td><a href="#" data-num='+n+' class="fas fa-backspace"></a></td></tr></table></li>';record.innerHTML=t}function delect(e){if(e.preventDefault(),"A"==e.target.nodeName||"I"==e.target.nodeName){var t=e.target.dataset.num;Data.splice(t,1),localStorage.setItem("BMIList",JSON.stringify(Data)),updataRecord(Data)}}function addText(){}updataRecord(Data),setInputFilter(cmId,function(e){return/^-?\d*[.]?\d{0,1}$/.test(e)}),setInputFilter(kgId,function(e){return/^-?\d*[.]?\d{0,1}$/.test(e)});var ani="animated pulse";$(".sendbtn, .save, .refresh").hover(function(){$(this).addClass(ani)},function(){$(this).removeClass(ani)}),sendbtn.addEventListener("click",countBMI,!1),record.addEventListener("click",delect,!1);